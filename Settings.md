# Settings

The **Settings** tab in the Digger Master inspector allows you to configure how Digger behaves and generates meshes.

## Voxel Generation

The **Generation** tab controls how voxels are created from your terrain.

### Voxel Generator

Select the voxel generator to use:

| Generator | Description |
|-----------|-------------|
| **Simple Voxel Generator** | Default generator. Creates voxels based purely on the terrain heightmap. All voxels are destructible. |
| **Advanced Voxel Generator** | Layered generator with depth-based textures and noise-based indestructible regions. |

### Using the Advanced Voxel Generator

The Advanced Voxel Generator provides two layer systems:

**Depth Layers**:
Assign textures and destructibility based on depth below the terrain surface.

| Setting | Description |
|---------|-------------|
| Min Depth | Minimum depth (in units) where this layer starts |
| Texture Index | Which terrain texture to use (0-7) |
| Destructible | Whether voxels in this layer can be dug |

Example configuration:
- Layer 1: depth 0, grass texture, destructible
- Layer 2: depth 5, dirt texture, destructible
- Layer 3: depth 10, stone texture, **indestructible**

This creates grass near the surface, dirt below, and undiggable stone at depth.

**Noise Layers**:
Add procedural variation using Perlin noise.

| Setting | Description |
|---------|-------------|
| Scale | Size of noise features (larger = bigger patches) |
| Octaves | Detail levels (more = finer detail, slower) |
| Persistence | How much each octave contributes |
| Threshold | Noise value above which the layer activates |
| Destructible | Whether affected voxels can be dug |
| Texture Index | Override texture (-1 = no override) |
| Blend Mode | `Replace` or `Add` (see below) |

**Blend Modes**:
- **Replace**: Fully replaces destructibility when noise is high
- **Add**: Only makes voxels indestructible, never destructible

### Creating Custom Generators

For advanced users, you can create custom voxel generators. See [Custom Voxel Generator](CustomVoxelGenerator.md).

## Data Management

### Scene data folder
Digger persists data in `Assets/DiggerData/<SceneName>`. You can customize the folder name here.
> **Warning**: If you rename this, manually rename the corresponding folder in `Assets/DiggerData` as well.

### Auto save meshes as Assets
When enabled (recommended), meshes generated by Digger are saved as distinct `.asset` files. This reduces the size of your Unity Scene file and can speed up saving/loading the scene.

## Editor Settings

- **Enable shortcuts**: Toggles keyboard shortcuts (B, N, Keypad keys).
- **Show underlying objects**: Reveals the hidden game objects generated by Digger in the Hierarchy (children of the Terrain). Useful for debugging.

## Rendering Settings

- **Layer**: The Unity Layer assigned to Digger meshes.
- **Tag**: The Unity Tag assigned to Digger meshes.
- **Enable Occlusion Culling**: Enables static occlusion culling for Digger meshes.
- **Contribute GI**: Marks Digger meshes as static for Global Illumination (Lightmapping).

## Performance & Quality

### Chunk Size
Determines the size of the meshes generated by Digger.

| Value | Pros | Cons |
|-------|------|------|
| **16** | Faster editing, smaller memory per chunk | More draw calls |
| **32** | Balanced | - |
| **64** | Fewer draw calls | Slower updates when editing |

> **Changing this requires clearing all Digger data.**

### Resolution
Multiplies the resolution of Digger meshes relative to the terrain heightmap.

| Value | Description |
|-------|-------------|
| **x1** | Same resolution as terrain. Fastest, lowest detail. |
| **x2** | Double resolution. Good balance for most projects. |
| **x4** | High detail. Good for close-up caves. |
| **x8** | Maximum detail. Use sparingly, high memory usage. |

> **Changing this requires clearing all Digger data.**

### Auto Voxel Height
Adjusts voxel height based on heightmap resolution. Disable to manually set `Voxel Height`.

## Floating Voxel Removal

### Auto remove floating voxels
When enabled, Digger automatically detects and removes floating pieces of terrain (voxels) that are not connected to the main ground. This prevents "floating islands" of dirt from appearing when digging complex shapes.

### Max floating voxel group size to remove
Controls the maximum size of floating voxel groups that will be automatically removed.

| Value | Effect |
|-------|--------|
| **Low (10-20)** | Only removes small floating debris |
| **Medium (30-50)** | Removes medium floating chunks (default: 30) |
| **High (100+)** | Removes larger floating islands |

> **Tip**: Set this higher if you're creating complex cave systems with lots of thin walls that might produce floating pieces.

## Advanced Features

- **Force MicroSplat Material Update**: Forces regeneration of MicroSplat materials on every sync. Useful if materials get desynchronized.

## LOD Settings

Digger automatically generates LODs (Level of Detail) for caves to optimize performance.

- **Enable LODs generation**: Recommended for build/runtime performance.
- **Screen Relative Transition Height**: Controls the distance at which LODs switch.
- **Collider LOD**: Controls the complexity of the mesh collider.
  - **0**: Most accurate (matches visual mesh).
  - **1 or 2**: Simplified collider (better physics performance).

